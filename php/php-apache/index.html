<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Getúlio Vinicius <getuliovinits@gmail.com">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>PHP - com Apache - Configurações</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "PHP - com Apache";
    var mkdocs_page_input_path = "php/php-apache.md";
    var mkdocs_page_url = "/php/php-apache/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-70830801-12', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Configurações</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Configurações</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Sistemas Operacionais</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../sistemas-operacionais/arch-linux/">Arch Linux</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sistemas-operacionais/debian9/">Debian9</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Git</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../git/git/">Git</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Shell</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../shell/zsh/">zsh</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Python</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../python/virtualenv/">virtualenv</a>
                </li>
                <li class="">
                    
    <a class="" href="../../python/mkdocs/">Mkdocs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">PHP</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">PHP - com Apache</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#ambiente_php">Ambiente PHP</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#instalacao_do_php">Instalação do PHP</a></li>
        
            <li><a class="toctree-l4" href="#instalacao_do_modulo_php_para_o_apache">Instalação do módulo PHP para o Apache</a></li>
        
            <li><a class="toctree-l4" href="#virtualhost_para_o_ambiente_php">VirtualHost para o ambiente PHP</a></li>
        
            <li><a class="toctree-l4" href="#extensoes_do_php">Extensões do PHP</a></li>
        
            <li><a class="toctree-l4" href="#gerenciador_de_dependencias_composer">Gerenciador de dependências Composer</a></li>
        
            <li><a class="toctree-l4" href="#configurar_diretorios_de_desenvolvimento">Configurar diretórios de desenvolvimento</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../phpmyadmin/">Phpmyadmin</a>
                </li>
                <li class="">
                    
    <a class="" href="../hesk/">Hesk</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Java</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../java/jre/">JRE</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Node.JS</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../nodejs/nodejs/">Node.JS</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Servidores Web</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../servidores-web/apache/">Apache2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../servidores-web/nginx/">Nginx</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Banco de Dados</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../banco-de-dados/mysql/">MySQL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../banco-de-dados/mongodb/">MongoDB</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Editores</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../editores-de-codigo/atom/">Atom</a>
                </li>
                <li class="">
                    
    <a class="" href="../../editores-de-codigo/brackets/">Brackets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../editores-de-codigo/sublime-text/">Sublime Text</a>
                </li>
                <li class="">
                    
    <a class="" href="../../editores-de-codigo/vs-code/">VS Code</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Configurações</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>PHP &raquo;</li>
        
      
    
    <li>PHP - com Apache</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/getuliovinicius/configuracoes/blob/master/mds/php/php-apache.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="ambiente_php">Ambiente PHP<a class="headerlink" href="#ambiente_php" title="Permanent link">&para;</a></h1>
<p><em>Versão 1 - atualizada em 08/05/2017</em></p>
<hr />
<p><em>PHP</em> é uma linguagem de <em>scripts</em> de propósito geral que é especialmente adequado para desenvolvimento web. <em>PHP</em> é um acrônimo para &ldquo;Pré Processor HiperText&rdquo;, mas e daí ;)</p>
<h2 id="instalacao_do_php">Instalação do PHP<a class="headerlink" href="#instalacao_do_php" title="Permanent link">&para;</a></h2>
<p><strong>Procedimento para instalar o <em>PHP</em> nos sistemas operacionais <em>Debian, Ubuntu e Linux Mint</em>:</strong></p>
<p>Antes antes de realizar a instalação do <em>PHP</em> é recomendável adicionar um repositório que possibilite a atualização e o uso da última versão da linguagem, o que não costuma ser fácil especialmente no <em>Debian</em>.<br />
Sendo assim, podemos adicionar os repositórios do site <a href="https://www.dotdeb.org">https://www.dotdeb.org</a> ao arquivo <code>sources.list</code>, vamos lá:</p>
<pre class="codehilite"><code class="language-bash">$ sudo vim /etc/apt/sources.list</code></pre>


<p>Copie o conteúdo abaixo para o final da lista</p>
<pre class="codehilite"><code># Dotdeb
deb http://packages.dotdeb.org jessie all
deb-src http://packages.dotdeb.org jessie all</code></pre>


<p>Na sequência instale a chave do repositório:</p>
<pre class="codehilite"><code class="language-bash">$ wget https://www.dotdeb.org/dotdeb.gpg
$ sudo apt-key add dotdeb.gpg</code></pre>


<p>Por fim, quanto a adicão dos repositórios do site <em>dotdeb.org</em>, podemos atualizar a lista de pacotes disponíveis para instalação:</p>
<pre class="codehilite"><code class="language-bash">$ sudo apt update</code></pre>


<p>Partindo para a instalação, o comando abaixo vai instalar o básico do PHP:</p>
<pre class="codehilite"><code class="language-bash">$ sudo apt install php7.0</code></pre>


<div class="admonition note">
<p class="admonition-title">Info</p>
<p><strong>Pacotes instalados:</strong> <em>libapache2-mod-php7.0 php-common php7.0 php7.0-cli php7.0-common php7.0-json php7.0-opcache php7.0-readline</em></p>
<p><strong>Observação:</strong> A lista de pacotes instalados não deveria incluir o pacote <em>libapache2-mod-php7.0</em>, ocorre que eu já havia instalado o <em>Apache</em> antes e talvez por essa razão tal pacote tenha sido instalado neste momento. Se isso ocorrer não há necessidade de seguir os passos descritos em <strong>&ldquo;Instalação do módulo PHP para o Apache&rdquo;</strong>.</p>
</div>
<p>Para checar a instalação do PHP execute o comando:</p>
<pre class="codehilite"><code class="language-bash">$ php --version</code></pre>


<h2 id="instalacao_do_modulo_php_para_o_apache">Instalação do módulo PHP para o Apache<a class="headerlink" href="#instalacao_do_modulo_php_para_o_apache" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Info</p>
<p>Neste exemplo irei utilizar o <em>Apache</em> como servidor web, mas o <em>PHP</em> pode ser utilizado com outros servidores web.<br />
Caso não tenha o <em>Apache</em> instalado siga as instruções no tutorial: <a href="../../servidores-web/apache/">Servidor Web Apache2</a>.</p>
</div>
<p>Vamos instalar o módulo do apache <em>libapache2-mod-php</em>:</p>
<pre class="codehilite"><code class="language-bash">$ sudo apt-get install libapache2-mod-php7.0</code></pre>


<h2 id="virtualhost_para_o_ambiente_php">VirtualHost para o ambiente PHP<a class="headerlink" href="#virtualhost_para_o_ambiente_php" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Info</p>
<p>Totalmente opcional.</p>
</div>
<p>Para testar o funcionamento vamos criar um <em>VirtualHost</em>, ou simplesmente <em>vHost</em>, que sirva para checar o ambiente PHP e todas as suas características. Começaremos com a estrutura de diretórios para projetos de páginas dinâmicas em PHP.</p>
<pre class="codehilite"><code class="language-bash">$ sudo mkdir -p /srv/www/php/ambiente-php.local
$ cd /srv/www/php/ambiente-php.local</code></pre>


<p>Crie um arquivo <code>info.php</code> dentro do diretório recém criado:</p>
<pre class="codehilite"><code class="language-bash">$ sudo vim index.php</code></pre>


<p>Copie o conteúdo abaixo para o arquivo:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
phpinfo();
?&gt;</code></pre>


<p>Alterar o proprietário dos diretórios e arquivos em <code>/srv/www</code> para o usuário e grupo <code>www-data</code>:</p>
<pre class="codehilite"><code class="language-bash">$ sudo chown www-data\: /srv/www -R</code></pre>


<p>Na sequência é preciso configurar o <em>vhost</em>.</p>
<pre class="codehilite"><code class="language-bash">$ cd /etc/apache2/sites-available</code></pre>


<p>Criar um arquivo chamado <code>ambiente-php.local.conf</code>:</p>
<pre class="codehilite"><code class="language-bash">$ sudo vim /etc/apache2/sites-available/ambiente-php.local.conf</code></pre>


<p>Copie o conteúdo abaixo para o arquivo:</p>
<pre class="codehilite"><code class="language-apacheconf">&lt;VirtualHost *:80&gt;
    DocumentRoot /srv/www/php/ambiente-php.local
    &lt;Directory /srv/www/php/ambiente-php.local/&gt;
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow, deny
        allow from all
    &lt;/Directory&gt;
    ServerName ambiente-php.local
    ServerAdmin root@ambiente-php.local
    ErrorLog /var/log/apache2/ambiente-php.local_error.log
    CustomLog /var/log/apache2/ambiente-php.local_access.log common
&lt;/VirtualHost&gt;</code></pre>


<p>O novo <em>vHost</em> deve ser habilitado usando o comando <code>a2ensite</code>, e o Apache reiniciado para persistir as mudança.</p>
<pre class="codehilite"><code class="language-bash">$ sudo a2ensite ambiente-php.local.conf
$ sudo systemctl restart apache2.service</code></pre>


<p>E adicionar a entrada para o <em>vHost</em> no arquivo <code>/etc/hosts</code>:</p>
<pre class="codehilite"><code class="language-bash">$ sudo vim /etc/hosts</code></pre>


<p>Adicione a linha abaixo após as entradas criadas anteriormente para APP1 e APP2.</p>
<pre class="codehilite"><code class="language-rc">127.0.0.1   ambiente-php.local</code></pre>


<p>Acesse os endereços <a href="http://ambiente-php.local">http://ambiente-php.local</a> para verificar toda a configuração do PHP.</p>
<h2 id="extensoes_do_php">Extensões do PHP<a class="headerlink" href="#extensoes_do_php" title="Permanent link">&para;</a></h2>
<div class="admonition attention">
<p class="admonition-title">Atenção</p>
<p>As extensões do PHP devem ser instaladas e configuradas apenas para satisfazer as necessidades de aplicações que se queira usar. Não devem ser instalados módulos que não serão utilizados por nenhuma aplicação. As extensões que serão instaladas na sequência, são exigências para instalar aplicações como Phpmyadmin, MediaWiki, Drupal e também para desenvolver utilizando os Frameworks: Laravel e CodeIgniter por exemplo.</p>
</div>
<p>Comando para instalar as extensões <em>gd, mbstring, mcrypt, mysql, intl, xml</em>:</p>
<pre class="codehilite"><code class="language-bash">$ sudo apt install php7.0-gd php7.0-mbstring php7.0-mcrypt php7.0-mysql php7.0-intl php7.0-xml</code></pre>


<div class="admonition note">
<p class="admonition-title">Info</p>
<p><strong>Pacotes instalados:</strong> <em>libmcrypt4 php7.0-gd php7.0-intl php7.0-mbstring php7.0-mcrypt php7.0-mysql php7.0-xml</em></p>
</div>
<p>Extensão <em>php7.0-curl</em> usada para conectar <em>webservices</em>.</p>
<pre class="codehilite"><code class="language-bash">$ sudo apt install php7.0-curl</code></pre>


<div class="admonition note">
<p class="admonition-title">Info</p>
<p><strong>Pacotes instalados:</strong> <em>libcurl3 php7.0-curl</em></p>
</div>
<p>Gerenciador de dependências &ldquo;PEAR&rdquo;: (opcional)</p>
<pre class="codehilite"><code class="language-bash">$ sudo apt-get install php-pear</code></pre>


<p>Após instalar as extensões do PHP que julgar necessárias, é preciso reiniciar o Apache:</p>
<pre class="codehilite"><code class="language-bash">$ sudo systemctl restart apache2.service</code></pre>


<p>Para listar os módulos do PHP instalados e habilitados, rode o comando:</p>
<pre class="codehilite"><code class="language-bash">$ php -m</code></pre>


<h2 id="gerenciador_de_dependencias_composer">Gerenciador de dependências Composer<a class="headerlink" href="#gerenciador_de_dependencias_composer" title="Permanent link">&para;</a></h2>
<p>O <em>Composer</em> pode ser instalado globalmente ou apenas no escopo do projeto que está em desenvolvimento. Siga as instruções abaixo para instalar globalmente, as mesmas podem podem ser vistas no site do gerenciador <a href="https://getcomposer.org/">https://getcomposer.org/</a>.</p>
<pre class="codehilite"><code class="language-bash">$ php -r &quot;copy('https://getcomposer.org/installer', 'composer-setup.php');&quot;
$ php -r &quot;if (hash_file('SHA384', 'composer-setup.php') === '669656bab3166a7aff8a7506b8cb2d1c292f042046c5a994c43155c0be6190fa0355160742ab2e1c88d40d5be660b410') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;&quot;
$ php composer-setup.php
$ php -r &quot;unlink('composer-setup.php');&quot;
$ sudo mv composer.phar /usr/local/bin/composer</code></pre>


<div class="admonition attention">
<p class="admonition-title">Atenção</p>
<p>A chave &lsquo;669656bab3166a7aff8a7506b8cb2d1c292f042046c5a994c43155c0be<br />
6190fa0355160742ab2e1c88d40d5be660b410&rsquo; pode não ser a mesma quando em uma instalação futura, é preciso conferir em <a href="https://getcomposer.org/download/">https://getcomposer.org/download/</a>.</p>
</div>
<p>Para verificar a versão do composer:</p>
<pre class="codehilite"><code class="language-bash">$ composer -V</code></pre>


<h2 id="configurar_diretorios_de_desenvolvimento">Configurar diretórios de desenvolvimento<a class="headerlink" href="#configurar_diretorios_de_desenvolvimento" title="Permanent link">&para;</a></h2>
<p>No Linux o único diretório com permissão de escrita para o usuário padrão, o usuário da instalação do sistema operacional, é o diretório <em>home</em> de sua conta: <code>/home/nome_usuario</code>.<br />
Por essa razão não dá pra editar o código PHP no local que instalamos as aplicações, ou seja, o diretório <code>/srv/www/php</code>. Sendo assim vamos mudar as configurações de forma sutil para termos acesso de leitura e escrita aos arquivos de código fonte das aplicações.</p>
<div class="admonition note">
<p class="admonition-title">info</p>
<p>Em outros tutoriais irei demonstrar a instalação de aplicações como: <em>Drupal, Phpmyadmin, MediaWiki e WordPress</em>, tais aplicações não necessitam de alterações no código, portanto serão sempre instaladas no diretório <code>/srv/www/php</code>. A configuração mostrada até agora reflete de forma fidedigna as configurações ideais para instalação de aplicações PHP em servidores de produção. Daqui em diante veremos como transformar a instalação em algo próprio para desenvolvimento.</p>
</div>
<p>O primeiro passo é criar um diretório no diretório <em>home</em> do usuário padrão, criado durante a instalação do sistema operacional Linux, por exemplo <code>/home/nome_usuario/DEV_WEB/PHP/VHOSTS</code>.</p>
<pre class="codehilite"><code class="language-bash">$ mkdir -p ~/DEV_WEB/PHP/VHOSTS</code></pre>


<div class="admonition note">
<p class="admonition-title">info</p>
<p>O <code>~</code> (til) é um curinga que substitui o diretório <em>home</em> no momento de digitar comandos no prompt.</p>
</div>
<p>Na pasta <em>VHOSTS</em> iremos criar propriamente nossas aplicações, portanto será ali que iremos colocar os diretórios <em>.local</em>, por exemplo:</p>
<pre class="codehilite"><code class="language-bash">$ cd ~/DEV_WEB/PHP/VHOSTS
$ mkdir projeto1.local</code></pre>


<p>Agora vamos criar um link simbólico para o diretório <em>projeto1.local</em> dentro do diretório reconhecido pelo Apache <code>/srv/www/php/</code>:</p>
<pre class="codehilite"><code class="language-bash">$ cd /srv/www/php/
$ sudo ln -s ~/DEV_WEB/PHP/VHOSTS/projeto1.local .
$ sudo chown -R www-data\: projeto1.local</code></pre>


<p>Acessamos o diretório de desenvolvimento criado na <em>home</em> do usuário padrão:</p>
<pre class="codehilite"><code class="language-bash">$ cd ~/DEV_WEB/PHP/VHOSTS/</code></pre>


<p>Então passamos para a mudança sutil que nos permitirá o acesso com leitura e escrita aos códigos fonte de aplicações desenvolvidas em PHP.<br />
Alteramos o usuário dono, mas não o grupo, do diretório <code>~/DEV_WEB/PHP/VHOSTS/projeto1.local</code> para o usuário padrão:</p>
<pre class="codehilite"><code class="language-bash">$ sudo chown -R seu_uruario:www-data projeto1.local/</code></pre>


<p>De agora em diante é possível editar projetos, códigos de aplicações desenvolvidas em PHP, com editores de texto como o <em>Sublime Text</em>.<br />
Sempre que for rodar uma aplicação desenvolvida por você mesmo repita os passos na sequência, substituindo <em>projetoX.local</em> pelo nome que você deseja:</p>
<pre class="codehilite"><code class="language-bash">$ cd /srv/www/php/
$ sudo ln -s ~/DEV_WEB/PHP/VHOSTS/projetoX.local
$ sudo chown -R www-data\: projetoX.local
$ cd ~/DEV_WEB/PHP/VHOSTS
$ mkdir projetoX.local
$ sudo chown -R seu_uruario:www-data projetoX.local/</code></pre>


<p>A configuração dos <em>vHosts</em> e as entradas no arquivo <code>/etc/hosts</code> podem ser feitas conforme o exemplo em <a href="php.md#virtualhost_para_o_ambiente_php">VirtualHost para o ambiente PHP</a>.</p>
<div class="admonition note">
<p class="admonition-title">info</p>
<p>Acostume-se a lidar com permissões de arquivos, principalmente com os comandos <code>chown</code> e <code>chmod</code>, pois isso é fundamental no desenvolvimento e quem não sabe usar corretamente esses comandos faz cagada em servidores.<br />
Não é brincadeira. Saber usar o prompt de comando e conhecer o funcionamento de permissões e propriedades de arquivos e diretórios faz toda diferença.</p>
</div>
<h3 id="scripts">Scripts<a class="headerlink" href="#scripts" title="Permanent link">&para;</a></h3>
<p>Se você não se empolgou com isso, fica então esses dois <em>scripts</em>, um para criar um novo projeto e outro para remover um projeto. Basta copiar o código e salvar em um arquivo dentro de um diretório de sua preferência, eu aconselho o deixar em <code>~/DEV_WEB/PHP</code> e logo após dar permissão de execução.</p>
<p><strong>novo-projeto.sh</strong></p>
<pre class="codehilite"><code class="language-bash">$ cd ~/DEV_WEB/PHP
$ vim novo-projeto.sh</code></pre>


<p>Copie o conteúdo abaixo para o arquivo:</p>
<pre class="codehilite"><code class="language-sh">#!/bin/bash
# RECEBE O USUARIO ATUAL
USER_DEV=$USER
# LE O NOME DO DOMINIO PARA O PROJETO
echo &quot;Informe o domínio para o projeto (Ex.: projeto-01.local):&quot;
read DOMINIO
if [ -e &quot;/etc/apache2/sites-available/$DOMINIO.conf&quot; ]; then
    echo &quot;ERRO: O domínio já existe.&quot;
    exit 1
fi
# LE A LINGUAGEM DO PROJETO
#echo &quot;Informe a linguagem principal de desenvolvimento do projeto (Ex.: php):&quot;
#read LINGUAGEM
LINGUAGEM=&quot;php&quot;
LINGUAGEM_DEV_DIR=&quot;PHP&quot;
# CRIA O DIRETORIO DO PROJETO
mkdir -pv $HOME/DEV_WEB/$LINGUAGEM_DEV_DIR/VHOSTS/$DOMINIO/
# MUDAR PARA SUPERUSUARIO
echo &quot;&gt;&gt;&gt;&quot;
echo &quot;Para criar o vHost no Apache é preciso rodar o script como super usuário.&quot;
echo &quot;Certifique-se que seu usuário ($USER_DEV) tem permissão para usar o comando sudo.&quot;
echo &quot;&gt;&gt;&gt;&quot;
sudo -u root bash &lt;&lt; EOF
# ALTERA A PROPRIEDADE DO GRUPO DO DIRETORIO DO PROJETO PARA O GRUPO DO APACHE
chown -v $USER_DEV:www-data $HOME/DEV_WEB/$LINGUAGEM_DEV_DIR/VHOSTS/$DOMINIO
# CRIA UM LINK ENTRE DO DIRETORIO DO PROJETO PARA O DIRETORIO DO VHOST
ln -s $HOME/DEV_WEB/$LINGUAGEM_DEV_DIR/VHOSTS/$DOMINIO /srv/www/$LINGUAGEM/$DOMINIO
chown -Rv www-data\: /srv/www/$LINGUAGEM/$DOMINIO
# CRIA O VHOST DO APACHE
echo &quot;&lt;VirtualHost *:80&gt;
    DocumentRoot /srv/www/$LINGUAGEM/$DOMINIO
    &lt;Directory /srv/www/$LINGUAGEM/$DOMINIO/&gt;
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;
    ServerName $DOMINIO
    ServerAdmin root@$DOMINIO
    ErrorLog /var/log/apache2/$DOMINIO-error.log
    CustomLog /var/log/apache2/$DOMINIO-access.log common
&lt;/VirtualHost&gt;&quot; &gt; /etc/apache2/sites-available/$DOMINIO.conf
a2ensite $DOMINIO.conf
# REINICIA O APACHE
systemctl restart apache2.service
# CRIA UMA ENTRADA PARA O DOMINIO NO ARQUIVO HOSTS
echo &quot;127.0.0.1 $DOMINIO&quot; &gt;&gt; /etc/hosts
EOF
echo &quot;acesse: http://$DOMINIO&quot;
exit</code></pre>


<p>Para dar permissão de execução execute o comando:</p>
<pre class="codehilite"><code class="language-bash">$ chmod +x novo-projeto.sh</code></pre>


<p>Para chamar o <em>script</em> na linha de comando digite:</p>
<pre class="codehilite"><code class="language-bash">$ ./novo-projeto.sh</code></pre>


<p><strong>remover-projeto.sh</strong></p>
<pre class="codehilite"><code class="language-bash">$ cd ~/DEV_WEB
$ vim remover-projeto.sh</code></pre>


<p>Copie o conteúdo abaixo para o arquivo:</p>
<pre class="codehilite"><code class="language-sh">#!/bin/bash
# RECEBE O USUARIO ATUAL
USER_DEV=$USER
# LE O NOME DO DOMINIO PARA O PROJETO
echo &quot;Informe o projeto que quer remover (Ex.: projeto-01.local):&quot;
read DOMINIO
if [ ! -e &quot;/etc/apache2/sites-available/$DOMINIO.conf&quot; ]; then
    echo &quot;ERRO: O domínio não existe.&quot;
    exit 1
fi
# LE A LINGUAGEM DO PROJETO
#echo &quot;Informe a linguagem principal de desenvolvimento do projeto (Ex.: php):&quot;
#read LINGUAGEM
LINGUAGEM=&quot;php&quot;
LINGUAGEM_DEV_DIR=&quot;PHP&quot;
if [ ! -d &quot;/srv/www/$LINGUAGEM/$DOMINIO&quot; ]; then
    echo &quot;ERRO: Link do projeto não existe.&quot;
    exit 1
fi
# MUDAR PARA SUPERUSUARIO
echo &quot;&gt;&gt;&gt;&quot;
echo &quot;Para remover o vHost no Apache é preciso rodar o script como super usuário.&quot;
echo &quot;Certifique-se que seu usuário ($USER_DEV) tem permissão para usar o comando sudo.&quot;
echo &quot;&gt;&gt;&gt;&quot;
sudo -u root bash &lt;&lt; EOF
# REMOVE A ENTRADA PARA O DOMINIO NO ARQUIVO HOSTS
sed -i '/$DOMINIO/Id' /etc/hosts
# REMOVE O VHOST DO APACHE
a2dissite $DOMINIO.conf
rm /etc/apache2/sites-available/$DOMINIO.conf
# REMOVE O LINK SIMBOLICO ENTRE O DIRETORIO DO PROJETO E O VHOST
rm /srv/www/$LINGUAGEM/$DOMINIO
# REINICIA O APACHE
systemctl restart apache2.service
EOF
# REMOVE O DIRETORIO DO PROJETO
rm -rfv $HOME/DEV_WEB/$LINGUAGEM_DEV_DIR/VHOSTS/$DOMINIO/</code></pre>


<p>Para dar permissão de execução execute o comando:</p>
<pre class="codehilite"><code class="language-bash">$ chmod +x remover-projeto.sh</code></pre>


<p>Para chamar o <em>script</em> na linha de comando digite:</p>
<pre class="codehilite"><code class="language-bash">$ ./remover-projeto.sh</code></pre>


<p>E isso é tudo sobre PHP no momento&hellip;</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../phpmyadmin/" class="btn btn-neutral float-right" title="Phpmyadmin">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../python/mkdocs/" class="btn btn-neutral" title="Mkdocs"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/getuliovinicius/configuracoes/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../python/mkdocs/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../phpmyadmin/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
